"use strict";(self["webpackChunkflutter_buy_sell"]=self["webpackChunkflutter_buy_sell"]||[]).push([[5232],{8753:function(e,n,a){a.r(n),a.d(n,{default:function(){return K}});var l=a(6252),i=a(3577),o=a(9963),t={class:"sm:mt-28 lg:mt-28 mt-28 bg-primary-500 dark:bg-primaryDark-accent h-screen flex flex-col"},r={class:"w-96 flex flex-col bg-background dark:bg-backgroundDark m-auto rounded-lg"},u=(0,l._)("div",{id:"recaptcha-container"},null,-1),s=(0,l.Uk)(),c=(0,l._)("br",null,null,-1),d={class:"flex items-center justify-center mb-4"},_={class:"flex flex-auto justify-center mt-4 mb-10"};function p(e,n,a,p,g,m){var v=(0,l.up)("ps-label-title"),f=(0,l.up)("ps-label"),h=(0,l.up)("ps-input"),k=(0,l.up)("ps-label-caption"),b=(0,l.up)("ps-button"),w=(0,l.up)("user-phone-login-verification-modal"),y=(0,l.up)("ps-error-dialog");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("div",t,[(0,l._)("div",r,[(0,l.Wm)(v,{class:"mt-8 mx-auto text-2xl"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,i.zw)(e.$t("phone_login__phone_login")),1)]})),_:1}),(0,l.Wm)(f,{class:"mt-4 mx-8"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,i.zw)(e.$t("phone_login__user_name"))+" : ",1)]})),_:1}),(0,l.Wm)(h,{class:"mt-2 mx-8",type:"text",placeholder:e.$t("phone_login__user_name"),onKeyup:(0,o.D2)(p.clicked,["enter"]),onKeypress:p.validateName,value:p.name,"onUpdate:value":n[0]||(n[0]=function(e){return p.name=e})},null,8,["placeholder","onKeyup","onKeypress","value"]),p.isValidUserName?((0,l.wg)(),(0,l.j4)(k,{key:0,class:"mt-2 mx-8",textColor:"text-primary-500 dark:text-primaryDark-accent"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,i.zw)(e.$t("phone_login__user_name_required")),1)]})),_:1})):(0,l.kq)("",!0),(0,l.Wm)(k,{class:"mt-2 mx-8"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,i.zw)(e.$t("phone_login__user_name_format")),1)]})),_:1}),(0,l.Wm)(f,{class:"mt-4 mx-8"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,i.zw)(e.$t("phone_login__phone_number"))+" : ",1)]})),_:1}),(0,l.Wm)(h,{class:"mt-2 mx-8",type:"text",placeholder:e.$t("phone_login__phone_number_placeholder"),onKeyup:(0,o.D2)(p.clicked,["enter"]),onKeypress:p.validatePhone,value:p.phone,"onUpdate:value":n[1]||(n[1]=function(e){return p.phone=e})},null,8,["placeholder","onKeyup","onKeypress","value"]),p.isValidPhone?((0,l.wg)(),(0,l.j4)(k,{key:1,class:"mt-2 mx-8",textColor:"text-primary-500 dark:text-primaryDark-accent"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,i.zw)(e.$t("phone_login__phone_required")),1)]})),_:1})):(0,l.kq)("",!0),u,s,c,(0,l._)("div",d,[p.userProvider.loading.value?((0,l.wg)(),(0,l.j4)(b,{key:0,class:"mt-6 mx-8",disabled:!0},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,i.zw)(e.$t("phone_login__loading")),1)]})),_:1})):((0,l.wg)(),(0,l.j4)(b,{key:1,class:"mt-6 mx-8",onClick:p.clicked,disabled:!1},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,i.zw)(e.$t("phone_login__login")),1)]})),_:1},8,["onClick"]))]),(0,l._)("div",_,[(0,l.Wm)(k,{class:"cursor-pointer",onClick:p.loginClicked},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,i.zw)(e.$t("phone_login__back_to_login")),1)]})),_:1},8,["onClick"])])])]),(0,l.Wm)(w,{ref:"user_phone_login_verification_modal"},null,512),(0,l.Wm)(y,{ref:"ps_error_dialog"},null,512)])}var g=a(655),m=a(2262),v=a(5503),f=(a(2211),a(8345)),h=a(3824),k=a(4687),b=a(1340),w=a(4625),y=a(6064),x=a(8298),U=a(2253),Z=a(2381),P=a(9399),C=a(7259),$=a(3542),z=a(2567),L=a(679),V=a(9070),W={name:"PhoneLoginView",components:{PsLabel:k.Z,PsLabelTitle:b.Z,PsButton:y.Z,PsInput:x.Z,UserPhoneLoginVerificationModal:U.Z,PsErrorDialog:Z.Z,PsLabelCaption:w.Z},setup:function(){var e,n=(0,C.ie)(),a=new $.Z,i=(0,f.yj)(),o=P.$.psValueHolder,t=o.getLoginUserId(),r=(0,m.iH)(),u=(0,m.iH)(),s=(0,m.iH)(!1),c=(0,m.iH)(!1),d=(0,m.iH)(),_=(0,m.iH)();function p(){n.loading.value=!0,setTimeout((function(){window.recaptchaVerifier=new v.Z.auth.RecaptchaVerifier("recaptcha-container",{size:"invisible",callback:function(e){V.Z.log("Callback"),V.Z.log(e)},"expired-callback":function(){V.Z.log("expiry callback")}}),e=window.recaptchaVerifier,n.loading.value=!1}),1e3)}function k(){n.navigateUserLoginTo("login",h.Z,i.query.redirect,i.query,i.params)}function b(){return(0,g.mG)(this,void 0,void 0,(function(){var l,o,p,m=this;return(0,g.Jh)(this,(function(f){switch(f.label){case 0:return l=!0,""!=r.value&&void 0!=r.value||(s.value=!0,l=!1),""!=r.value&&void 0!=r.value||(c.value=!0,l=!1),l?(a.phoneId=t,a.userName=r.value,a.userPhone=u.value,n.loading.value=!0,o=e,[4,v.Z.auth().signInWithPhoneNumber(u.value,o).catch((function(e){n.loading.value=!1,_.value.openModal(L.a.global.t("phone_login__error_in_sign_in"),null===e||void 0===e?void 0:e.message)}))]):(window.scrollTo(0,0),[2]);case 1:return p=f.sent(),n.loading.value=!1,void 0!=p&&d.value.openModal("Phone No Verification","","Submit","Cancel",(function(e){return(0,g.mG)(m,void 0,void 0,(function(){var l=this;return(0,g.Jh)(this,(function(o){return n.loading.value=!0,p.confirm(e).then((function(e){return(0,g.mG)(l,void 0,void 0,(function(){var l;return(0,g.Jh)(this,(function(o){switch(o.label){case 0:return null==e||null==e.user||null==e.user.uid||""==e.user.uid?[3,2]:(l=e.user,a.phoneId=l.uid,[4,n.submitUserLoginWithPhoneId(l.uid,r.value,u.value)]);case 1:return o.sent(),n.userResource.status==z.Z.SUCCESS?n.navigateUserLoginRedirect(i.query.redirect,"dashboard",h.Z,i.query.redirect,i.query,i.params):(_.value.openModal(L.a.global.t("phone_login__error_in_sign_in"),n.userResource.message),n.setLoading(!1)),[3,3];case 2:n.setLoading(!1),o.label=3;case 3:return[2]}}))}))})).catch((function(e){n.setLoading(!1),_.value.openModal(L.a.global.t("phone_login__error_in_sign_in"),null===e||void 0===e?void 0:e.message)})),[2]}))}))}),(function(){V.Z.log("Cancel")})),[2]}}))}))}function w(e){var n=/^\/$|(\/[a-zA-Z_0-9-]+)+$/,a=n.test(e.target.value);s.value=!!a}function y(e){var n=/^\/$|(\/[a-zA-Z_0-9-]+)+$/,a=n.test(e.target.value);c.value=!!a}return n.loading.value=!0,(0,l.bv)((function(){p()})),{userProvider:n,clicked:b,name:r,phone:u,user_phone_login_verification_modal:d,ps_error_dialog:_,loginClicked:k,isValidUserName:s,validateName:w,validatePhone:y,isValidPhone:c}}},q=a(8118);const D=(0,q.Z)(W,[["render",p]]);var K=D}}]);
//# sourceMappingURL=PhoneLogin.6a064184.js.map